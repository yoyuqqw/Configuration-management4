# Virtual Machine Assembler and Interpreter

## Описание проекта

Проект представляет собой виртуальную машину с возможностями ассемблера и интерпретатора. Система позволяет преобразовывать программы, написанные на простом ассемблерном языке, в бинарный формат, выполняемый виртуальной машиной. Она демонстрирует базовые механизмы перевода команд в машинный код и их выполнения.

Основное назначение проекта — обеспечить понимание принципов работы виртуальных машин и ассемблеров. Проект полезен для учебных целей и экспериментов.

---
## Основные функции
- Ассемблер: преобразует текстовую программу в бинарный файл, понятный виртуальной машине.
- Интерпретатор: выполняет команды из бинарного файла и сохраняет результаты.
- Автоматизация: скрипт для выполнения всех этапов (ассемблирование, интерпретация) в одном запуске.
---

## Структура проекта

```
project/
|-- assembler.py              # Ассемблер: переводит команды из текстового файла в бинарный формат.
|-- interpreter.py            # Интерпретатор: выполняет команды из бинарного файла.
|-- run_all.py                # Автоматический запуск всех шагов (ассемблирование и интерпретация).
|-- test_program.asm          # Тестовая программа на ассемблере для выполнения операций MIN над вектором.
|-- output.bin                # Бинарный файл, сгенерированный ассемблером.
|-- log.json                  # Лог-файл с ассемблированными командами и их значениями.
|-- result.json               # Файл с результатами выполнения интерпретатора.
|-- README.md                 # Описание проекта, инструкции по запуску и объяснение назначения каждого файла.
|-- requirements.txt          # Зависимости Python для проекта (если они нужны).
|-- tests/
    |-- test_assembler.py     # Тесты для проверки корректности работы ассемблера.
    |-- test_interpreter.py   # Тесты для проверки работы интерпретатора.
```
---
## Пример работы проекта

### Ассемблер
Файл test_program.asm содержит команды на простом ассемблерном языке. Пример программы:
```
LOAD_CONST 50
STORE_MEM 100
LOAD_CONST 75
STORE_MEM 101
LOAD_CONST 200
STORE_MEM 102
LOAD_CONST 300
STORE_MEM 103
LOAD_MEM 100
MIN_OP 185
STORE_MEM 100
LOAD_MEM 101
MIN_OP 185
STORE_MEM 101
LOAD_MEM 102
MIN_OP 185
STORE_MEM 102
LOAD_MEM 103
MIN_OP 185
STORE_MEM 103
```

Эта программа выполняет поэлементную операцию MIN над вектором длины 4 и числом 185, записывая результат в исходный вектор.

### Интерпретатор
Команды из test_program.asm преобразуются в бинарный файл output.bin с помощью ассемблера. Затем интерпретатор выполняет команды из output.bin, изменяя значения в памяти виртуальной машины. Результаты сохраняются в файле result.json.

### Автоматизация
Для автоматического выполнения всех этапов используйте скрипт run_all.py:

python run_all.py

Этот скрипт:
1. Ассемблирует программу из test_program.asm в бинарный файл output.bin.
2. Выполняет интерпретацию бинарного файла, изменяя состояние виртуальной машины.
3. Сохраняет логи ассемблирования в log.json и результаты выполнения в result.json.

## Пример результатов

### Лог-файл (log.json):
```
[
    {"command": "LOAD_CONST", "operand_1": 50, "operand_2": 0},
    {"command": "STORE_MEM", "operand_1": 100, "operand_2": 0},
    {"command": "LOAD_CONST", "operand_1": 75, "operand_2": 0},
    {"command": "STORE_MEM", "operand_1": 101, "operand_2": 0}
]
```

### Результаты выполнения (result.json):
```
[
    {"command": "LOAD_CONST", "value": 50},
    {"command": "STORE_MEM", "address": 100, "value": 50},
    {"command": "LOAD_CONST", "value": 75},
    {"command": "STORE_MEM", "address": 101, "value": 75}
]
```

### Конечное состояние памяти:
- Адрес 100: 50
- Адрес 101: 75
- Адрес 102: 185
- Адрес 103: 185
---

## Инструкции по установке и запуску

1. Клонируйте репозиторий:
```
   git clone <ссылка на репозиторий>
   cd vm-assembler-interpreter
```

2. Установите зависимости (при необходимости):
```
   pip install -r requirements.txt
```
---
# Лицензия
Этот проект распростраянется под лицензией MIT. Для получения дополнительной информации смотрите файл `LICENSE`.